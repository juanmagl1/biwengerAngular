"use strict";(self.webpackChunkJuegoAngular=self.webpackChunkJuegoAngular||[]).push([[619],{9619:(S,h,s)=>{s.r(h),s.d(h,{UsuariosModule:()=>R});var p=s(6895),u=s(343),t=s(8256),c=s(8181),Z=s(529);let m=(()=>{class o{constructor(e){this.http=e,this.url=`${c.N.apiUrl}/usuario/puntos`,this.urlTodosUsuarios=`${c.N.apiUrl}/usuario/todos`,this.urlBorrado=`${c.N.apiUrl}/usuario/`}usuariosOrdenados(){return this.http.get(this.url)}obtenerTodosUsuarios(){return this.http.get(this.urlTodosUsuarios)}borrarUsuario(e){return this.http.delete(`${c.N.apiUrl}/usuario/${e}/borrar`)}editRol(e,n){return this.http.put(`${this.urlBorrado}${e}/update/rol`,n)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=s(9298);const C=function(){return["/jugadores/lista"]},x=function(){return["/usuarios/accion"]};function y(o,r){1&o&&(t.TgZ(0,"div",3)(1,"a",4),t.O4$(),t.TgZ(2,"svg",5),t._UZ(3,"path",6),t.qZA()(),t.kcU(),t.TgZ(4,"ul",7)(5,"li")(6,"a",8),t._uU(7,"Jugadores"),t.qZA()(),t.TgZ(8,"li")(9,"a",8),t._uU(10,"Usuarios"),t.qZA()()()()),2&o&&(t.xp6(6),t.Q6J("routerLink",t.DdM(2,C)),t.xp6(3),t.Q6J("routerLink",t.DdM(3,x)))}function T(o,r){if(1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"h4"),t._uU(3),t.qZA(),t.TgZ(4,"h4"),t._uU(5),t.qZA(),t.TgZ(6,"strong"),t._uU(7),t.qZA()()()),2&o){const e=r.$implicit,n=r.index;t.xp6(3),t.Oqu(n+1),t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Oqu(e.puntos)}}let M=(()=>{class o{constructor(e,n){this.usuarioService=e,this.auth=n}ngOnInit(){this.role=this.auth.role,this.usuarioService.usuariosOrdenados().subscribe({next:e=>{this.users=e},error:e=>{console.log(e)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m),t.Y36(f.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-usuarios-list"]],decls:6,vars:2,consts:[["class","dropdown izq",4,"ngIf"],[1,"containerUsers"],["class","containerPlayer",4,"ngFor","ngForOf"],[1,"dropdown","izq"],["href","#","role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-gear-fill"],["d","M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"containerPlayer"],[1,"containerFlex"]],template:function(e,n){1&e&&(t.YNc(0,y,11,4,"div",0),t.TgZ(1,"div",1)(2,"div")(3,"h1"),t._uU(4,"Clasificaci\xf3n"),t.qZA(),t.YNc(5,T,8,3,"div",2),t.qZA()()),2&e&&(t.Q6J("ngIf","ADMIN"==n.role),t.xp6(5),t.Q6J("ngForOf",n.users))},dependencies:[p.sg,p.O5,u.rH],styles:[".containerPlayer[_ngcontent-%COMP%]{border:1px solid black;border-radius:20px;width:60%;align-content:center;margin-left:20%;padding:2%;margin-top:1%;font-family:Arial;box-shadow:5px 5px 15px gray inset}.containerFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}h1[_ngcontent-%COMP%]{text-align:center;font-family:Arial;font-weight:700}.izq[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin-right:2%}"]}),o})();var A=s(5226),_=s.n(A),U=s(805),d=s(5414),b=s(3887);function w(o,r){1&o&&(t.TgZ(0,"tr",5)(1,"th",6),t._uU(2,"Nombre"),t._UZ(3,"p-sortIcon",7),t.qZA(),t.TgZ(4,"th",8),t._uU(5,"Role"),t._UZ(6,"p-sortIcon",9),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()())}const O=function(o){return["/usuarios/edit-role",o]};function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.borrarUsuario(l.username))}),t._uU(7,"Borrar"),t.qZA(),t.TgZ(8,"a",11),t._uU(9,"Editar"),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Oqu(e.role),t.xp6(4),t.Q6J("routerLink",t.VKq(3,O,e.username))}}let L=(()=>{class o{constructor(e,n){this.user=e,this.messageService=n}ngOnInit(){this.obtenerUsuarios()}borrarUsuario(e){_().fire({title:"\xbfQuieres borrar a este usuario?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(n=>{n.isConfirmed&&this.user.borrarUsuario(e).subscribe({next:a=>{console.log(a),console.log(this.mercado),this.mercado=this.mercado.filter(l=>l.username!=a.username),this.messageService.add({key:"action",severity:"success",summary:"Usuario borrado con exito"})},error:a=>{console.log(a)}})})}obtenerUsuarios(){this.user.obtenerTodosUsuarios().subscribe({next:e=>{this.mercado=e}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m),t.Y36(U.ez))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-users"]],decls:8,vars:4,consts:[[1,"tabla"],["currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} resultados",1,"table","table-responsive",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header","class","header"],["pTemplate","body"],["key","action"],[1,"enunciado"],["pSortableColumn","nombre"],["field","nombre"],["pSortableColumn","role"],["field","role"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"h1"),t._uU(2,"Gestionar Usuarios"),t.qZA(),t.TgZ(3,"div",0)(4,"p-table",1),t.YNc(5,w,9,0,"ng-template",2),t.YNc(6,F,10,5,"ng-template",3),t.qZA(),t._UZ(7,"p-toast",4),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("value",n.mercado)("paginator",!0)("rows",10)("showCurrentPageReport",!0))},dependencies:[u.rH,d.iA,U.jx,d.lQ,d.fz,b.FN],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:3%}@media screen and (max-width: 768px){.p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .p-datatable[_ngcontent-%COMP%]   .p-datatable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.p-datatable[_ngcontent-%COMP%]   .p-paginator[_ngcontent-%COMP%]{margin-top:1rem}}"]}),o})();var i=s(433);const P=function(){return["/usuarios/accion"]};let q=(()=>{class o{constructor(e,n,a,l,g){this.usu=e,this.auth=n,this.fb=a,this.router=l,this.route=g,this.username=this.route.snapshot.params.username,this.myForm=this.fb.group({role:[""]})}ngOnInit(){this.auth.obtenerUsuario(this.username).subscribe({next:e=>{this.myForm.setValue({role:e.role})}})}editarUsuarios(){null!=this.username&&this.usu.editRol(this.username,this.myForm.value).subscribe({next:e=>{this.router.navigate(["/usuarios/accion"])}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m),t.Y36(f.e),t.Y36(i.qu),t.Y36(u.F0),t.Y36(u.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-rol"]],decls:19,vars:4,consts:[[2,"text-align","center"],[1,"clase"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-sm-9"],[1,"form-check"],["type","radio","value","ADMIN","id","radioMasculino","formControlName","role",1,"form-check-input"],["for","radioMasculino",1,"form-check-label"],["type","radio","value","USER","id","radioFemenino","formControlName","role",1,"form-check-input"],["for","radioFemenino",1,"form-check-label"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Rol"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.NdJ("ngSubmit",function(){return n.editarUsuarios()}),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5),t._UZ(7,"input",6),t.TgZ(8,"label",7),t._uU(9," ADMIN "),t.qZA()(),t.TgZ(10,"div",5),t._UZ(11,"input",8),t.TgZ(12,"label",9),t._uU(13," USER "),t.qZA()(),t.TgZ(14,"div",1)(15,"button",10),t._uU(16," Guardar "),t.qZA(),t.TgZ(17,"button",11),t._uU(18," Volver "),t.qZA()()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",n.myForm),t.xp6(12),t.Q6J("disabled",n.myForm.invalid),t.xp6(2),t.Q6J("routerLink",t.DdM(3,P)))},dependencies:[u.rH,i._Y,i.Fj,i._,i.JJ,i.JL,i.sg,i.u],styles:[".clase[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.clase[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:4%}"]}),o})();var v=s(3818);const J=[{path:"lista",component:M},{path:"accion",component:L,canActivate:[v.p]},{path:"edit-role/:username",component:q,canActivate:[v.p]}];let N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(J),u.Bz]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,N,d.U$,b.EV,i.UX]}),o})()}}]);