"use strict";(self.webpackChunkJuegoAngular=self.webpackChunkJuegoAngular||[]).push([[619],{9619:(R,h,s)=>{s.r(h),s.d(h,{UsuariosModule:()=>N});var d=s(6895),u=s(343),t=s(8256),c=s(8181),b=s(529);let p=(()=>{class e{constructor(o){this.http=o,this.url=`${c.N.apiUrl}/usuario/puntos`,this.urlTodosUsuarios=`${c.N.apiUrl}/usuario/todos`,this.urlBorrado=`${c.N.apiUrl}/usuario/`}usuariosOrdenados(){return this.http.get(this.url)}obtenerTodosUsuarios(){return this.http.get(this.urlTodosUsuarios)}borrarUsuario(o){return this.http.delete(`${c.N.apiUrl}/usuario/${o}/borrar`)}editRol(o,n){return this.http.put(`${this.urlBorrado}${o}/update/rol`,n)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=s(9298);const T=function(){return["/jugadores/lista"]},C=function(){return["/usuarios/accion"]};function x(e,r){1&e&&(t.TgZ(0,"div",3)(1,"a",4),t.O4$(),t.TgZ(2,"svg",5),t._UZ(3,"path",6),t.qZA()(),t.kcU(),t.TgZ(4,"ul",7)(5,"li")(6,"a",8),t._uU(7,"Jugadores"),t.qZA()(),t.TgZ(8,"li")(9,"a",8),t._uU(10,"Usuarios"),t.qZA()()()()),2&e&&(t.xp6(6),t.Q6J("routerLink",t.DdM(2,T)),t.xp6(3),t.Q6J("routerLink",t.DdM(3,C)))}function A(e,r){if(1&e&&(t.TgZ(0,"div",9)(1,"div",10)(2,"h4"),t._uU(3),t.qZA(),t.TgZ(4,"h4"),t._uU(5),t.qZA(),t.TgZ(6,"strong"),t._uU(7),t.qZA()()()),2&e){const o=r.$implicit,n=r.index;t.xp6(3),t.Oqu(n+1),t.xp6(2),t.Oqu(o.nombre),t.xp6(2),t.Oqu(o.puntos)}}let y=(()=>{class e{constructor(o,n){this.usuarioService=o,this.auth=n}ngOnInit(){this.role=this.auth.role,this.usuarioService.usuariosOrdenados().subscribe({next:o=>{this.users=o},error:o=>{console.log(o)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p),t.Y36(f.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-usuarios-list"]],decls:6,vars:2,consts:[["class","dropdown izq",4,"ngIf"],[1,"containerUsers"],["class","containerPlayer",4,"ngFor","ngForOf"],[1,"dropdown","izq"],["href","#","role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-gear-fill"],["d","M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"containerPlayer"],[1,"containerFlex"]],template:function(o,n){1&o&&(t.YNc(0,x,11,4,"div",0),t.TgZ(1,"div",1)(2,"div")(3,"h1"),t._uU(4,"Clasificaci\xf3n"),t.qZA(),t.YNc(5,A,8,3,"div",2),t.qZA()()),2&o&&(t.Q6J("ngIf","ADMIN"==n.role),t.xp6(5),t.Q6J("ngForOf",n.users))},dependencies:[d.sg,d.O5,u.rH],styles:[".containerPlayer[_ngcontent-%COMP%]{border:1px solid black;border-radius:20px;width:60%;align-content:center;margin-left:20%;padding:2%;margin-top:1%;font-family:Arial;box-shadow:5px 5px 15px gray inset}.containerFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}h1[_ngcontent-%COMP%]{text-align:center;font-family:Arial;font-weight:700}.izq[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin-right:2%}"]}),e})();var q=s(5226),w=s.n(q),U=s(805),m=s(5414),Z=s(3887);function M(e,r){1&e&&(t.TgZ(0,"tr",5)(1,"th",6),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th",7),t._uU(4,"Dinero"),t.qZA(),t.TgZ(5,"th",8),t._uU(6,"Email"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Telefono"),t.qZA(),t.TgZ(9,"th",10),t._uU(10,"Role"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Acciones"),t.qZA()())}const F=function(e){return["/usuarios/edit-role",e]};function L(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"a",11),t.NdJ("click",function(){const l=t.CHM(o).$implicit,g=t.oxw();return t.KtG(g.borrarUsuario(l.username))}),t._uU(13,"Borrar"),t.qZA()(),t.TgZ(14,"td")(15,"a",12),t._uU(16,"Editar"),t.qZA()()()}if(2&e){const o=r.$implicit;t.xp6(2),t.Oqu(o.nombre),t.xp6(2),t.Oqu(o.dinero),t.xp6(2),t.Oqu(o.email),t.xp6(2),t.Oqu(o.telefono),t.xp6(2),t.Oqu(o.role),t.xp6(5),t.Q6J("routerLink",t.VKq(6,F,o.username))}}let O=(()=>{class e{constructor(o,n){this.user=o,this.messageService=n}ngOnInit(){this.obtenerUsuarios()}borrarUsuario(o){w().fire({title:"\xbfQuieres borrar a este usuario?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(n=>{n.isConfirmed&&this.user.borrarUsuario(o).subscribe({next:a=>{console.log(a),console.log(this.mercado),this.mercado=this.mercado.filter(l=>l.username!=a.username),this.messageService.add({key:"action",severity:"success",summary:"Usuario borrado con exito"})},error:a=>{console.log(a)}})})}obtenerUsuarios(){this.user.obtenerTodosUsuarios().subscribe({next:o=>{this.mercado=o}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p),t.Y36(U.ez))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-users"]],decls:7,vars:4,consts:[[1,"tabla"],["currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} resultados",1,"table",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header","class","header"],["pTemplate","body"],["key","action"],[1,"enunciado"],["pSortableColumn","nombre"],["pSortableColumn","dinero"],["pSortableColumn","email"],["pSortableColumn","telefono"],["pSortableColumn","role"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"routerLink"]],template:function(o,n){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Gestionar Usuarios"),t.qZA(),t.TgZ(2,"div",0)(3,"p-table",1),t.YNc(4,M,13,0,"ng-template",2),t.YNc(5,L,17,8,"ng-template",3),t.qZA(),t._UZ(6,"p-toast",4),t.qZA()),2&o&&(t.xp6(3),t.Q6J("value",n.mercado)("paginator",!0)("rows",10)("showCurrentPageReport",!0))},dependencies:[u.rH,m.iA,U.jx,m.lQ,Z.FN],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:3%}"]}),e})();var i=s(433);let S=(()=>{class e{constructor(o,n,a,l,g){this.usu=o,this.auth=n,this.fb=a,this.router=l,this.route=g,this.username=this.route.snapshot.params.username,this.myForm=this.fb.group({role:[""]})}ngOnInit(){this.auth.obtenerUsuario(this.username).subscribe({next:o=>{this.myForm.setValue({role:o.role})}})}editarUsuarios(){null!=this.username&&this.usu.editRol(this.username,this.myForm.value).subscribe({next:o=>{this.router.navigate(["/usuarios/accion"])}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p),t.Y36(f.e),t.Y36(i.qu),t.Y36(u.F0),t.Y36(u.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-rol"]],decls:17,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-sm-9"],[1,"form-check"],["type","radio","value","ADMIN","id","radioMasculino","formControlName","role",1,"form-check-input"],["for","radioMasculino",1,"form-check-label"],["type","radio","value","USER","id","radioFemenino","formControlName","role",1,"form-check-input"],["for","radioFemenino",1,"form-check-label"],[1,"row"],[1,"col"],[1,"btn","btn-primary",3,"disabled"]],template:function(o,n){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Editar Rol"),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return n.editarUsuarios()}),t.TgZ(3,"div",1)(4,"div",2)(5,"div",3),t._UZ(6,"input",4),t.TgZ(7,"label",5),t._uU(8," ADMIN "),t.qZA()(),t.TgZ(9,"div",3),t._UZ(10,"input",6),t.TgZ(11,"label",7),t._uU(12," USER "),t.qZA()(),t.TgZ(13,"div",8)(14,"div",9)(15,"button",10),t._uU(16," Guardar "),t.qZA()()()()()()),2&o&&(t.xp6(2),t.Q6J("formGroup",n.myForm),t.xp6(13),t.Q6J("disabled",n.myForm.invalid))},dependencies:[i._Y,i.Fj,i._,i.JJ,i.JL,i.sg,i.u],encapsulation:2}),e})();var v=s(3818);const _=[{path:"lista",component:y},{path:"accion",component:O,canActivate:[v.p]},{path:"edit-role/:username",component:S,canActivate:[v.p]}];let J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(_),u.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,J,m.U$,Z.EV,i.UX]}),e})()}}]);